<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X√°c nh·∫≠n - MANI Learning Hub</title>
    <style>
        :root { --primary: #003047; --secondary: #3A7595; --yellow: #FFE100; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; min-height: 100vh; background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 50%, var(--primary) 100%); display: flex; align-items: center; justify-content: center; padding: 20px; }
        .box { background: white; border-radius: 20px; padding: 40px; width: 100%; max-width: 420px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); text-align: center; }
        .icon { font-size: 48px; margin-bottom: 16px; }
        h2 { color: var(--primary); margin-bottom: 8px; }
        p { color: #666; font-size: 14px; margin-bottom: 20px; }
        .email-display { background: #f0f7fb; padding: 10px; border-radius: 8px; font-weight: 600; color: var(--secondary); margin-bottom: 20px; font-size: 14px; }
        .form-control { width: 100%; padding: 16px; border: 2px solid #ddd; border-radius: 10px; font-size: 24px; text-align: center; letter-spacing: 8px; font-weight: 700; outline: none; }
        .form-control:focus { border-color: var(--secondary); }
        .btn { width: 100%; padding: 14px; background: var(--yellow); color: var(--primary); border: none; border-radius: 10px; font-size: 16px; font-weight: 700; cursor: pointer; margin-top: 16px; }
        .btn:hover { opacity: 0.9; }
        .links { margin-top: 16px; font-size: 13px; color: #888; }
        .links a { color: var(--secondary); font-weight: 600; text-decoration: none; }
        .flash { padding: 10px 16px; border-radius: 8px; margin-bottom: 16px; font-size: 13px; text-align: left; }
        .flash-error { background: #f8d7da; color: #721c24; }
        .flash-success { background: #d4edda; color: #155724; }
        .flash-warning { background: #fff3cd; color: #856404; }
        .note { background: #fff8e1; border: 1px solid #ffe082; border-radius: 8px; padding: 12px; font-size: 12px; color: #795548; margin-bottom: 16px; text-align: left; }
    </style>
</head>
<body>
    <div class="box">
        <div class="icon">üìß</div>
        <h2>X√°c nh·∫≠n email</h2>
        <p>Nh·∫≠p m√£ x√°c nh·∫≠n 6 s·ªë ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒë·∫øn email:</p>
        <div class="email-display">{{ email }}</div>

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}{% for cat, msg in messages %}
        <div class="flash flash-{{ cat }}">{{ msg }}</div>
        {% endfor %}{% endif %}{% endwith %}

        <div class="note">
            üí° <strong>L∆∞u √Ω:</strong> N·∫øu SMTP ch∆∞a ƒë∆∞·ª£c c·∫•u h√¨nh, m√£ x√°c nh·∫≠n s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã trong server logs. Admin c√≥ th·ªÉ cung c·∫•p m√£ cho b·∫°n.<br>
            <em>If SMTP is not configured, the code appears in server logs. Admin can provide it.</em>
        </div>

        <form method="POST">
            <input type="hidden" name="email" value="{{ email }}">
            <input type="text" name="code" class="form-control" placeholder="000000" maxlength="6" required autofocus>
            <button type="submit" class="btn">X√°c nh·∫≠n / Verify</button>
        </form>
        <div class="links">
            <a href="{{ url_for('resend_code', email=email) }}">G·ª≠i l·∫°i m√£ / Resend code</a><br><br>
            <a href="{{ url_for('login') }}">‚Üê Quay l·∫°i ƒëƒÉng nh·∫≠p</a>
        </div>
    </div>
</body>
</html>
